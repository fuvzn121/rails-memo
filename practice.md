# Ruby & Rails ベストプラクティス
## カッコはK&Rスタイル
- ブロックを制御する構造の末尾に、開きカッコを配置
- ブロック内の内容を次の行から初めて、インデントを付ける
- 最後に制御構造と同じインデントレベルで新しい行に閉じカッコを配置

例
```ruby
my @names = {
  'test1',
  'test2',
}
```

## 制御分の引数と後続の間にスペース
- メソッド呼び出しと勘違いしないため

例
```ruby
for $result (@results ) {
  print 'test'
}
```

## メソッドまたは変数の名前と後続の開きカッコは間を開けない
- メソッド呼び出しを制御分と勘違いしたり、配列要素の先頭部分を独立したスカラー変数と読み間違えたりないため

例
```ruby
$candidates = get_candidates( $marker )
```

## 文末の後ろのセミコロンは省略
- 文末のセミコロンは省略する

例
```ruby
print $test
```

## 複数行にまたがるリストで最後の値の後ろにカンマ
- 複数行にまたがるリストでは最後の値の後ろにカンマを入れる

例
```ruby
@dwarves = {
  'test1',
  'test2',
}
```

## 2列のインデントレベル
- インデントの深さは2列

例
```ruby
my @names = {
  'test1',
  'test2',
}
```

## インデントにはタブではなくスペースを使用
- 異なる出力デバイスで表示する際に、タブとスペースが混ざっている場合見え方が違ってしまうため、スペースのみを使用する

## 配列の名前は複数形、ハッシュの名前は単数形
- ハッシュエントリは個別にアクセスされるため、ハッシュの名前は単数形
- 入れ雨は、まとめて処理されることが多いため複数形

例
```ruby
%option
@events
```

## アンダースコアを使って複数の単語を区切る
- 2つ以上の単語で構成される場合は、アンダースコアを使って区切る

例
```ruby
input_stream
```

## 大文字の使い分け
- サブルーチン、メソッド、変数、ラベル付き引数の名前は小文字のみ
- パッケージ、クラスには大文字と小文字
- 定数には大文字のみ
- 例外として固有名詞や略語や単位は馴染みのある表記に従う(HTTP, LaTeX, Mbps)

## 複数行の文字列はヒアドキュメントを使う
- 改行で分割して記述する方法は見た目が良くないので、ヒアドキュメントを使用する

例
```ruby
$usage = <<"END_USAGE"
Usage: $0 <file> [-o]
  -o : dump in octal
END_USAGE
```

## クラスやメソッドどうしの区切りは空行を挿入
- クラスやメソッドどうしの区切りは空行を挿入する。ただし、最初や最後の場合は空行を入れない。

例
```ruby
class Hoge
  ...
end

class Fuga
  ...
end
```
```ruby
class Hoge
  def foo
    ...
  end

  def var
    ...
  end
end
```

## メソッドは引数がある場合、カッコを付ける
- メソッドは引数がある場合、カッコを付ける。引数がない場合は、省略

例
```ruby
def hoge(x, y)
  ...
end

def huga
  ...
end
```

## ブロック処理は基本的にdo endを使用
- ブロック処理は基本的にdo endを使用する。ただし、メソッドチェインを使う場合は{}を使用する。

例
```ruby
hoge.foreach do |i|
  ...
end
```
```ruby
hoge.collect { |i| i.to_s }.join(",")
```

## if文のthenは省略
- if文のthenは省略する

例
```ruby
if x > 0
  ...
else
  ...
end
```

## if !xはunless xに置き換える
- if !xはunless xに置き換える

例
```ruby
unless hoge
  ...
end
```

## 文字列リテラルは基本的に""を使用
- 文字列リテラルには基本的に""を使用する。ただし、特殊文字を解釈させたくない場合のみ''を使用する。

例
```ruby
hoge = "fuga"
```

## クラス名とモジュール名は、単語の1文字目を大文字で、区切り文字は使用しない
- クラス名とモジュール名は、単語の1文字目を大文字で使用する。区切り文字は使用しない。

例
```ruby
HogeFuga
```

## メソッド名は、すべて小文字で単語の区切りはアンダースコアを使用
- メソッド名は、すべて小文字で単語の区切りはアンダースコアを使用する

例
```ruby
hoge_fuga
```

